<UserControl x:Class="batteryQI.Views.UserControls.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <!-- Main Section -->
        <Grid x:Name="mainSection" Grid.Column="1" Margin="5 20 25 20" Panel.ZIndex="1">

            <Grid.RowDefinitions>
                <RowDefinition Height="50"/>
                <RowDefinition Height="450"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!--Main Image Insert Section-->
            <Border Grid.Row="1" Grid.ColumnSpan="2" CornerRadius="20" Margin="0 0 20 20">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                        <GradientStop Color="#6a5dae" Offset="0"/>
                        <GradientStop Color="#54479c" Offset="1.2"/>
                    </LinearGradientBrush>
                </Border.Background>

                <!--Main Image PreView Section-->
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="배터리 이미지" Margin="20 15" FontSize="20" FontWeight="SemiBold" Foreground="White" VerticalAlignment="Top"/>

                    <Border CornerRadius="10" Margin="20 50 20 70">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                <GradientStop Color="White" Offset="0"/>
                                <GradientStop Color="White" Offset="1.2"/>
                            </LinearGradientBrush>
                        </Border.Background>

                        <Image Source="{Binding battery.ImagePath}" Stretch="Uniform" x:Name="PreviewImage"/>
                    </Border>

                    <Button Style="{StaticResource imageSectionButton}" Margin="0 360 0 0" Content="이미지 선택" Command="{Binding ImageSelectButton_ClickCommand}" FontSize="17" FontWeight="SemiBold" />
                </Grid>
            </Border>

            <!-- Image Info Section-->
            <Grid Grid.Column="2" Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <Border CornerRadius="20" Background="#7163ba">
                    <StackPanel Orientation="Vertical" Margin="20">
                        <TextBlock Text="배터리 이미지 정보" Margin="0 0 0 0" FontSize="20" FontWeight="SemiBold" Foreground="White" VerticalAlignment="Top" HorizontalAlignment="Center"/>

                        <ComboBox x:Name="manufacture"
                                  ItemsSource="{Binding Path = DataContext.ManufacList, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}"
                                  Text="제조사" IsEditable="true" IsReadOnly="true" IsDropDownOpen="False" StaysOpenOnEdit="False" 
                                  SelectedValue="{Binding battery.ManufacName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="150" Margin="10 50 0 0">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}"/>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                        <ComboBox x:Name="batteryType"
                                  ItemsSource="{Binding Path = DataContext.BatteryTypeList, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}"
                                  Text="배터리 타입" IsEditable="true" IsReadOnly="true" IsDropDownOpen="False" StaysOpenOnEdit="False" 
                                  SelectedValue="{Binding battery.BatteryType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="150" Margin="10 50 0 0">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}"/>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>

                        <ComboBox x:Name="batteryShape"
                                  ItemsSource="{Binding Path = DataContext.BatteryShapeList, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}"
                                  Text="배터리 형태" IsEditable="true" IsReadOnly="true" IsDropDownOpen="False" StaysOpenOnEdit="False" 
                                  SelectedValue="{Binding battery.BatteryShape, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="150" Margin="10 50 0 0">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}"/>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>

                        </ComboBox>
                        <ComboBox 
                            x:Name="battryUsage"
                            ItemsSource = "{Binding Path = DataContext.UsageList, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}"
                            Text="사용처" IsEditable="true" IsReadOnly="true" IsDropDownOpen="False" StaysOpenOnEdit="False" 
                            SelectedValue="{Binding battery.Usage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="150" Margin="10 50 0 0">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}"/>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>

                        <Button Style="{StaticResource imageSectionButton}" Margin="0 35 0 -10" Content="이미지 분석" FontSize="17" FontWeight="SemiBold" Command="{Binding ImageInspectionButton_ClickCommand}"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Progress Section -->
            <Border Grid.Row="2" Grid.ColumnSpan="3" CornerRadius="10" Background="#7163ba" Padding="0 0 0 10">
                <Grid>
                    <StackPanel Orientation="Vertical">
                        <TextBlock Margin="10" Text="검사 진행률" FontSize="17" Foreground="white" FontWeight="SemiBold" />
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Margin="20 0 0 0" Text="{Binding TotalWorkAmount, Mode=Oneway, UpdateSourceTrigger=PropertyChanged, StringFormat='총 작업량: {0}'}" />
                            <TextBlock Margin="20 0 0 0" Text="{Binding CompletedWorkAmount, Mode=Oneway, UpdateSourceTrigger=PropertyChanged, StringFormat='완료 작업량: {0}'}"/>
                            <TextBlock Margin="20 0 0 0" Text="{Binding WorkProgress, Mode=Oneway, UpdateSourceTrigger=PropertyChanged, StringFormat='작업 진행률: {0}%'}"/>
                        </StackPanel>

                        <ProgressBar Margin="20 10 20 0" Height="20" Value="{Binding WorkProgress}" Maximum="100" />
                    </StackPanel>
                </Grid>
            </Border>

            <Frame x:Name="MainFrame" NavigationUIVisibility="Hidden"/>
        </Grid>

    </Grid>
</UserControl>
